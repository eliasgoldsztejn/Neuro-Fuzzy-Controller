time_mark = zeros(1,100);
S1_mark = zeros(1,100);
S2_mark = zeros(1,100);
energy_mark = zeros(1,100);
success = zeros(1,100);

for i=1:1
    %% Initialize map
    mazeDir = strcat(".\Maze",num2str(i),".pgm");
    I = imread(mazeDir);

    imageNorm = double(I)/255;
    imageOccupancy = 1 - imageNorm;
    imageOccupancy = round(imageOccupancy);

    map = robotics.OccupancyGrid(imageOccupancy,2);
    save('map');

    
    for j=1:100
        %% Simulation
        %sol = TrialFrictionFisObstaclesAccuracy([0.70500832319801	0.498227929455356	0.679904685523419	0.498104487122709	...
          %  0.491145804011365	0.0693676026690024	0.922685220392168	0.0849970645027028	0.548009157335659	0.946020375394758	...
          % 0.901831370980072	0.932303197968758	1.60064124922374	1.98931170252708	1.78402340829785	3.67558633738124	...
          % 1.48544242203099	5.33941571417577	0.0316893001122069	0.548670594067366	0.422531388268483	0.652459724145901],...
          %  imageOccupancy);
        %sol = TrialFrictionFisObstaclesAccuracy([0.129906208473730,0.446783749429806,0.0286741524641061,0.817760559370642,0.661944751905652,0.534064127370726,0.398589496735843,0.104813241973500,0.251041846015736,0.642060828433852,0.583570618757714,0.590608652919636,1.19584076593022,3.57729227420163,1.34623625848857,1.94394986320803,1.15745592226778,5.81215702183317,0.232240145961793,0.219283588182430,0.904666479690125,0.0590953126800806],imageOccupancy);
        %sol = TrialFrictionFisObstaclesAccuracy([0.190902853244491	0.277611122264388	0.557292680689929	0.487430654415445	0.278267020151879	0.278784528621045	0.546479648029272	0.922358001090054	0.566860831789241	0.873536456464217	0.199157181618953	0.687652548069517	0.549135230816881	3.53416688317943	0.997236733044218	1.99403579916087	1.88136255403047	4.70751228605445	0.642339157082965	0.460547461088786	0.467734261291993	0.320277088369962],imageOccupancy);
        sol = TrialFrictionFisObstaclesAccuracy([0.327587623330954,0.735029064012583,0.637361034184797,0.673828462681195,0.429602902986410,0.813205819273310,0.240315434553662,0.421182644208825,0.392855186632144,0.492892318037055,0.926520273632769,0.396024937334365,1.24174117693332,4.40401833453269,0.927093282387492,2.72498292813891,0.981969497529208,4.37943130363835,0.310644935916921,0.979997070511796,0.332850478571121,0.516654465465249],imageOccupancy);
        time_mark((i-1)*20 + j) = sol(2);
        S1_mark((i-1)*20 + j) = -sol(1);
        S2_mark((i-1)*20 + j) = 1/sol(4);
        energy_mark((i-1)*20 + j) = sol(3);
        success((i-1)*20 + j) = sol(5);
    end
end
%%
sum(success)
median_s1 = median(S1_mark)
std_s1 = std(S1_mark)
median_s2 = median(S2_mark)
std_s2 = std(S2_mark)
median_energy = median(energy_mark)
std_energy = std(energy_mark)
median_time = median(time_mark)
std_time = std(time_mark)